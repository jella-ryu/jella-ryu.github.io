---
layout: post
title: "Non-Inferiority Hypothesis Test"
category: [Statistics]
tags: [Statistics]
comments: true
published: true
---

> 📚 검정의 목표가 새로운 치료법이 기존 치로볍보다 일정 수준 이상 나쁘지 않다는 걸 보이는 경우

새로운 치료법이나 개입이 기존 치료법과 비교하여 적어도 동등한 수준의 효과를 가지는지 평가하는 것은 흔한 과제이다. 
흔히 **평균값을 비교**하면 된다고 생각할 수 있지만, 실제로는 단순한 평균 비교로는 충분하지 않다.

특히, 목표가 새로운 치료법이 기존 치료법보다 나은지 증명하는 것이 아니라, 일정 수준 이상으로 나쁘지 않다는 것을 보이는 것이라면, 이를 검증하기 위한 특별한 통계적 방법이 필요하다. 바로 **비열등성 검정(Non-Inferiority Test)**이 그 해결책이다.

    새로운 치료법이 기존 치료법보다 효과가 떨어지더라도, 허용가능한 범위 내에 있는지를 확인하는데 사용한다.

## 비열등성 검정(Non-Inferiority Test)의 개념
- 비열등성 검정은 새로운 치료법이 기존 치료법보다 더 우수함을 증명하는 것이 아니라, 허용 가능한 범위 내에서 충분히 효과적임을 보이는 것이 목표이다. 
- 여기서 **"허용 가능한 수준"**을 결정하는 기준이 **비열등성 마진(Δ)**이다.
- 예를 들어, Δ=5라면 새로운 치료법이 기존 치료법보다 최대 5단위까지 효과가 낮더라도 여전히 수용 가능하다고 판단할 수 있다.

### 가설 설정

    귀무가설 (H₀): 새로운 치료법이 기존 치료법보다 비열등성 마진(Δ)보다 더 나쁘다
    대립가설 (H₁): 새로운 치료법이 기존 치료법보다 비열등성 마진(Δ)보다 덜 나쁘거나 동등하다

### 💊 예시
1. 약물의 효과에서 높은 값🔺이 더 좋은 경우
- 귀무가설 : 새로운 치료법이 기존 치료법보다 Δ만큼 효과가 낮거나 더 나쁘다.
- 대립가설 : 새로운 치료법이 기존 치료법보다 Δ만큼 효과가 덜 나쁘거나 동등하다.

2. 약물의 부작용에서 낮은 값🔻이 더 좋은 경우
- 귀무가설 : 새로운 치료법이 기존 치료법보다 Δ만큼 부작용이 더 크거나 더 나쁘다.
- 대립가설 : 새로운 치료법이 기존 치료법보다 Δ만큼 부작용이 덜 나쁘거나 동등하다.


### Z-통계량 (Z-Statistic) 계산
- 비열등성 검정을 수행할 때, **Z-통계량(Z-Statistic)**을 계산하여 두 치료법 간의 차이가 비열등성 마진(Δ)과 비교하여 얼마나 떨어져 있는지 측정한다.

- Z-통계량 해석:
계산된 Z-값을 표준 정규분포에서 비교하여, 귀무가설(H₀)을 기각할 수 있는지 판단한다.
일반적으로 유의수준(α)을 설정하고, 해당 값보다 크면 귀무가설을 기각하고 비열등성을 입증할 수 있다.

### 신뢰구간(Confidence Interval)과 비열등성 검정
비열등성 검정에서는 **p-값뿐만 아니라 신뢰구간(CI)**도 중요한 해석 도구로 사용된다. 신뢰구간을 통해 비열등성을 판단하는 방법은 측정값의 방향(높을수록 좋은 경우 vs. 낮을수록 좋은 경우)에 따라 다르다.

1. 높은 값이 더 좋은 경우 (예: 약물 효과, 점수 등)
**신뢰구간의 하한(lower bound)**을 확인한다.  
하한이 -Δ보다 크다면, 즉 CI의 하한 > -Δ이면, 새로운 치료법이 비열등하다고 결론을 내릴 수 있다.

2. 낮은 값이 더 좋은 경우 (예: 부작용, 오류율 등)
**신뢰구간의 상한(upper bound)**을 확인한다.  
상한이 Δ보다 작다면, 즉 CI의 상한 < Δ이면, 새로운 치료법이 비열등하다고 결론을 내릴 수 있다.

---

### 결과 해석

👉 비열등성 검정의 결과는 **Z-통계량의 부호(양수/음수)와 측정값의 방향(높을수록 좋은 경우 vs. 낮을수록 좋은 경우)**에 따라 해석이 달라진다. 이를 쉽게 이해하기 위해 2x2 프레임워크로 정리할 수 있다.

| **측정값 방향** | **Z-통계량 > 0 (긍정적 결과)** | **Z-통계량 < 0 (부정적 결과)** |
|---------------|---------------------------------|---------------------------------|
| **높을수록 좋은 경우 (ex: 약물 효과, 성능 점수 등)** | **비열등성이 입증됨**<br>신뢰구간 하한이 -Δ보다 큼 | **비열등성이 입증되지 않음**<br>신뢰구간 하한이 -Δ보다 작음 |
| **낮을수록 좋은 경우 (ex: 부작용, 오류율 등)** | **비열등성이 입증됨**<br>신뢰구간 상한이 Δ보다 작음 | **비열등성이 입증되지 않음**<br>신뢰구간 상한이 Δ보다 큼 |


[참고자료](https://medium.com/towards-data-science/all-you-need-to-know-about-non-inferiority-test-c58a74ec4cc5)


